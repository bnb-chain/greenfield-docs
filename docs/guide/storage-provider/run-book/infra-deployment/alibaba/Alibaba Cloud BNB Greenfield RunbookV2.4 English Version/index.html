<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guide/storage-provider/run-book/infra-deployment/alibaba/Alibaba Cloud BNB Greenfield RunbookV2.4 English Version">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Alibaba Cloud BNB Greenfield RunbookV2.4 English Version | BNB Greenfield</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/run-book/infra-deployment/alibaba/Alibaba Cloud BNB Greenfield RunbookV2.4 English Version/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Alibaba Cloud BNB Greenfield RunbookV2.4 English Version | BNB Greenfield"><meta data-rh="true" name="description" content="Greenfield Storage Provider Deployment Guide - Alibaba Cloud"><meta data-rh="true" property="og:description" content="Greenfield Storage Provider Deployment Guide - Alibaba Cloud"><link data-rh="true" rel="icon" href="/greenfield-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/run-book/infra-deployment/alibaba/Alibaba Cloud BNB Greenfield RunbookV2.4 English Version/"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/run-book/infra-deployment/alibaba/Alibaba Cloud BNB Greenfield RunbookV2.4 English Version/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/run-book/infra-deployment/alibaba/Alibaba Cloud BNB Greenfield RunbookV2.4 English Version/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3LF005YNGZ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/greenfield-docs/blog/rss.xml" title="BNB Greenfield RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/greenfield-docs/blog/atom.xml" title="BNB Greenfield Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="BNB Greenfield" href="/greenfield-docs/opensearch.xml"><link rel="stylesheet" href="/greenfield-docs/assets/css/styles.52c35f0a.css">
<link rel="preload" href="/greenfield-docs/assets/js/runtime~main.52086998.js" as="script">
<link rel="preload" href="/greenfield-docs/assets/js/main.ab98da64.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/greenfield-docs/"><div class="navbar__logo"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">BNB Greenfield</b></a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/guide/introduction/overview/">Guide</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/tutorials/overview/">Tutorials</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/api/endpoints/">API &amp; SDK</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/release-notes/releaseNotes/">Releases</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/faq/greenfield-faqs/">FAQs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bnb-chain/greenfield-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Alibaba Cloud BNB Greenfield RunbookV2.4 English Version</h1></header><div class="row"><div class="col col--12"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="greenfield-storage-provider-deployment-guide---alibaba-cloud">Greenfield Storage Provider Deployment Guide - Alibaba Cloud<a class="hash-link" href="#greenfield-storage-provider-deployment-guide---alibaba-cloud" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisitesalibaba-cloud-ack-creation">Pre-requisites(Alibaba Cloud ACK Creation)<a class="hash-link" href="#pre-requisitesalibaba-cloud-ack-creation" title="Direct link to heading">​</a></h3><p>1 Create an ACK Container Service K8S cluster – Search for Container Service Fpr Kubernetes in the console and click Create Kubernetes Cluster</p><p>2 Select the Managed Kubernetes version(Managed ACK), deployment region, billing method, VPC network/virtual switch/pod virtual switch, network plug-in (Terway is recommended) and other network-related configuration</p><p>3 Create a node pool name, select node instance specifications, quantity, disk size/performance level and operating system (recommended at least 2* ECS with 12vcpu 48G RAM), and set the corresponding login method and password</p><p>4 Select the type and specifications of the Ingress service to create, and then confirm the order and create the cluster</p><p>View the created ACK cluster information and connect to ACK based on the connection information provided by Alibaba Cloud.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisitesconnect-to-the-ack-cluster-through-ecs-on-the-alibaba-cloud">Pre-requisites(Connect to the ACK cluster through ECS on the Alibaba Cloud)<a class="hash-link" href="#pre-requisitesconnect-to-the-ack-cluster-through-ecs-on-the-alibaba-cloud" title="Direct link to heading">​</a></h3><p>1 After ACK is created successfully, go to the Cluster Information – Connection Information – Internal Access</p><p>2 Create an ECS (Ubuntu 22 or above is recommended for Linux, and CENTOS7 is not recommended), install kubectl according to the instructions, copy and paste the content in the picture above in <!-- -->~<!-- -->/.kube/config. After the configuration is completed, you can use kubectl from ECS to access Kubernetes cluster</p><p>2.1 Install kubectl:
<a href="https://kubernetes.io/docs/tasks/tools/?spm=5176.2020520152.0.0.782d16ddm5WRG6" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/tools/?spm=5176.2020520152.0.0.782d16ddm5WRG6</a></p><p>2.2 Reference video (windows version):
<a href="https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/getting-started/getting-started-with-ack-using-kubectl" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/zh/ack/ack-managed-and-ack-dedicated/getting-started/getting-started-with-ack-using-kubectl</a></p><p>2.3 Verify connectivity:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># kubectl get node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                    STATUS   ROLES    AGE   VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cn-hongkong.13.0.0.10   Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   80d   v1.26.3-aliyun.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cn-hongkong.13.0.0.8    Ready    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">   80d   v1.26.3-aliyun.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-sp-by-using-alibaba-cloud-ack">Deploy SP by using Alibaba Cloud ACK<a class="hash-link" href="#deploy-sp-by-using-alibaba-cloud-ack" title="Direct link to heading">​</a></h2><p>1 Install kustomization
Reference Link：<a href="https://kubectl.docs.kubernetes.io/installation/kustomize/" target="_blank" rel="noopener noreferrer">https://kubectl.docs.kubernetes.io/installation/kustomize/</a></p><p>1.1 Install GO(other methods are acceptable as well)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test ~]# snap install go --classic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1.2 GO Install Kustomize via Go
<a href="https://kubectl.docs.kubernetes.io/installation/kustomize/source/" target="_blank" rel="noopener noreferrer">https://kubectl.docs.kubernetes.io/installation/kustomize/source/</a></p><p>2 Install gnfd</p><p>Below reference link to download BNB Greenfield latest releases, we use Linux as an example here, can use cmd or FileZilla and other tools to upload to the test ECS machine
<a href="https://github.com/bnb-chain/greenfield/releases" target="_blank" rel="noopener noreferrer">https://github.com/bnb-chain/greenfield/releases</a></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ub:~</span><span class="token comment" style="color:#999988;font-style:italic"># mv linux gnfd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@ub:~</span><span class="token comment" style="color:#999988;font-style:italic"># chmod a+x gnfd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@ub:~</span><span class="token comment" style="color:#999988;font-style:italic"># ./gnfd version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version: v0.2.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Git Commit: dba6afc62009d9e1b424613a437bc284f2ac9a1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Git Commit Date: </span><span class="token number" style="color:#36acaa">20230829</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Architecture: amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Go Version: go1.20.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Operating System: linuxroot@ub:~</span><span class="token comment" style="color:#999988;font-style:italic"># </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3 Upload and decompress sp.tar.gz
Can use tools such as cmd or FileZilla to upload to the test ECS machine and decompress it (such as installing unzip, etc.)</p><p>cd to the directory cd <!-- -->~<!-- -->/alicloud-sp/base/vendors/alicloud/large</p><p>4 Configure ServiceAccount via RRSA</p><p>4.1 Alibaba Cloud reference link:
<a href="https://www.alibabacloud.com/help/zh/ack/ack-managed-and-ack-dedicated/user-guide/use-rrsa-to-authorize-pods-to-access-different-cloud-services" target="_blank" rel="noopener noreferrer">https://www.alibabacloud.com/help/zh/ack/ack-managed-and-ack-dedicated/user-guide/use-rrsa-to-authorize-pods-to-access-different-cloud-services</a></p><p>4.2 Complete the installation of the ack-pod-identity-webhook component:</p><ol><li><p>Install the ack-pod-identity-webhook component:</p><p>a.On the cluster Name/ID list page, click the target cluster name, and then select Operations &gt; Add-ons in the left navigation bar.</p><p>b.On the Add-ons page, click the Security tab, find the ack-pod-identitv-webhook component, and click Install on the lower right side of the component.</p><p>c.After confirming the component information in the prompt dialog box, click OK</p></li></ol><p>4.3 Create a RAM role, and configure the ACK namespace and a service account name (others can be based on the default values in the document):</p><p>	<!-- -->Create a RAM role （name: demo-role-for-rrsa）</p><ol><li>Log in to <a href="https://ram.console.aliyun.com/" target="_blank" rel="noopener noreferrer">RAM Console</a> using your Alibaba Cloud account.</li><li>In the left navigation bar, select <strong>Identities</strong> &gt; <strong>Roles</strong>, and then on the <strong>Roles</strong> page, click <strong>Create Role</strong>.</li><li>In the <strong>Create Role</strong> panel, select the trusted entity type as <strong>IdP</strong>, and then click <strong>Next</strong>.</li><li>On the <strong>Configure Role</strong> page, after configuring the following role information, click <strong>Finish</strong>.</li></ol><p>Here I created a role named greenfield and configured the oss permissions:</p><p>4.4 In the yaml deployment file created later, add tags and comments according to the documentation requirements:</p><p>	<!-- -->In the following YAML example, add the label <code>pod-identity.alibabacloud.com/injection: &#x27;on&#x27;</code> to the namespace, and add the annotation <code>pod-identity.alibabacloud.com/role-name: demo-role-for to the service account -rrsa</code>, enables the automatic injection function of the configuration of the ack-pod-identity-webhook component. For more instructions on ack-pod-identity-webhook component configuration, please see <!-- -->[ack-pod-identity-webhook]<!-- -->(<a href="https://www.alibabacloud.com/help/zh/ack/product-overview/ack-pod" target="_blank" rel="noopener noreferrer">https://www.alibabacloud.com/help/zh/ack/product-overview/ack-pod</a> -identity-webhook#task-2295049).</p><p>Example: I use the following sp.yaml file as an example. It needs to be modified according to the RAM role you actually created/the ACK namespace you actually used and the service account name. Here I am using
RAM role=greenfield; namespace = default;
service account name = default;</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test large]# cat sp.yaml |more</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ServiceAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pod-identity.alibabacloud.com/role-name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example: Use kubectl edit namespace default</p><p>Add the label pod-identity.alibabacloud.com/injection: &#x27;on&#x27; to the namespace</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Please edit the object below. Lines beginning with a &#x27;#&#x27; will be ignored,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># and an empty file will abort the edit. If an error occurs while saving this file will be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># reopened with the relevant failures.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubectl.kubernetes.io/last-applied-configuration: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Namespace&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;labels&quot;:{&quot;pod-identity.alibabacloud.com/injection&quot;:&quot;on&quot;},&quot;name&quot;:&quot;default&quot;}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: &quot;2023-06-20T07:53:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/metadata.name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pod-identity.alibabacloud.com/injection: &quot;on&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resourceVersion: &quot;8324154&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uid: a0ac0aa4-0326-4abd-b9f5-a8756bcb5e06</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  finalizers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  phase: Active</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.5 Confirm that the information in ServiceAccount has been changed to real information:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test large]# kubectl get namespace default -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubectl.kubernetes.io/last-applied-configuration: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Namespace&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;labels&quot;:{&quot;pod-identity.alibabacloud.com/injection&quot;:&quot;on&quot;},&quot;name&quot;:&quot;default&quot;}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: &quot;2023-06-20T07:53:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/metadata.name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pod-identity.alibabacloud.com/injection: &quot;on&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resourceVersion: &quot;8324154&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uid: a0ac0aa4-0326-4abd-b9f5-a8756bcb5e06</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  finalizers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  phase: Active</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.6 Prepare the domain name, which can be provided by yourself or purchased on Alibaba Cloud (international site domain name registration, Cloud DNS, etc.)</p><p>4.7 We will use Alibaba Cloud&#x27;s ALB. For details, please refer to items 2, 3, and 4 under step 1 in the Alibaba Cloud official website documentation:</p><p><a href="https://www.alibabacloud.com/help/zh/ack/ack-managed-and-ack-dedicated/user-guide/best-practice-for-migrating-from-a-self-managed-nginx-ingress-to-an-alb-ingress-1?spm=a2c63.p38356.0.0.2cbd1b8deaGwt4" target="_blank" rel="noopener noreferrer">https://www.alibabacloud.com/help/zh/ack/ack-managed-and-ack-dedicated/user-guide/best-practice-for-migrating-from-a-self-managed-nginx-ingress-to-an-alb-ingress-1?spm=a2c63.p38356.0.0.2cbd1b8deaGwt4</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/cors-allow-credentials: &quot;false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/cors-allow-headers: DNT,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Content-MD5,Range,Authorization,X-Gnfd-Content-Sha256,X-Gnfd-Unsigned-Msg,X-Gnfd-Txn-Hash,Date,X-Gnfd-Object-ID,X-Gnfd-Resource,X-Gnfd-Piece-Index,X-Gnfd-Redundancy-Index,Address,X-Gnfd-User-Address,X-Gnfd-App-Domain,X-Gnfd-App-Reg-Nonce,X-Gnfd-Date,X-Gnfd-App-Reg-Public-Key,X-Gnfd-App-Reg-Expiry-Date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/cors-allow-methods: GET,PUT,POST,DELETE,PATCH,OPTIONS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/cors-allow-origin: &#x27;*&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/cors-expose-headers: &#x27;*&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/cors-max-age: &quot;600&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/enable-cors: &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/listen-ports: &#x27;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alb.ingress.kubernetes.io/ssl-redirect: &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ingressClassName: gf-sp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - host: yourdomain.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - backend:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name: gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            port:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              number: 9033</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path: /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathType: Prefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - host: &#x27;*.yourdomain.com&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - backend:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name: gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            port:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              number: 9033</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path: /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathType: Prefix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.8 Modify the corresponding parameters in the config file</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@test large]# vim config/config.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Env = &quot;testnet&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GRPCAddress = &#x27;0.0.0.0:9333&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[SpDB]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Passwd = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Address = &#x27;rm-xxxxxxxxxxxx.mysql.rds.aliyuncs.com:3306&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Database = &#x27;storage_provider_db&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BsDB]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Passwd = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Address = &#x27;rm-xxxxxxxxxxxxxx.mysql.rds.aliyuncs.com:3306&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Database = &#x27;block_syncer&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[PieceStore]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Shards = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[PieceStore.Store]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Storage = &#x27;oss&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BucketURL = &#x27;https://xxxxxxxxxxxxxxxx.oss-cn-hongkong.aliyuncs.com&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MaxRetries = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MinRetryDelay = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TLSInsecureSkipVerify = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IAMType = &#x27;SA&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Chain]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ChainID = &#x27;greenfield_5600-1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ChainAddress = [&#x27;https://gnfd-testnet-fullnode-tendermint-us.bnbchain.org:443&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[SpAccount]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SpOperatorAddress = &#x27;xxxxxxxxxxxxxxxxxxxxxx&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Gateway]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DomainName = &#x27;xxxxxx.com&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTPAddress = &#x27;0.0.0.0:9033&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BlockSyncer]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Modules = [&#x27;epoch&#x27;,&#x27;bucket&#x27;,&#x27;object&#x27;,&#x27;payment&#x27;,&#x27;group&#x27;,&#x27;permission&#x27;,&#x27;storage_provider&#x27;,&#x27;prefix_tree&#x27;,&#x27;virtual_group&#x27;,&#x27;sp_exit_events&#x27;,&#x27;object_id_map&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BsDBWriteAddress = &quot;rm-xxxxxxxxxxxxxx.mysql.rds.aliyuncs.com:3306&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Workers = 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.9 Create secret:
Here you can choose to use the Alibaba Cloud KMS service. If you do not choose KMS with secrets, you need to manually create a secret file in secrets and complete the execution. You can refer to our reference secret.yaml file</p><p>Modify here to correspond to the real namespace and the name of the secret you want to create</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test large]# kubectl get secret default -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SIGNER_APPROVAL_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SIGNER_BLS_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SIGNER_GC_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SIGNER_OPERATOR_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SIGNER_SEAL_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SP_DB_PASSWORD: xxx=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SP_DB_USER: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can go to the ACK console to see that this secret has been successfully created:</p><p>And the corresponding names also appear. Here you need to fill in the corresponding information:</p><p>4.10 Secret Key Reference:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SP_DB_PASSWORD: xxx= </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SP_DB_USER: xxx== </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGNER_OPERATOR_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGNER_FUNDING_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGNER_SEAL_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGNER_APPROVAL_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGNER_GC_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGNER_BLS_PRIV_KEY: xxx==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P2P_PRIVATE_KEY: xxx==</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> <!-- -->The private key of SIGNER&#x27;s operator/funding/seal/approval/gc needs to be obtained by executing the gnfd statement. Please keep it properly afterwards. Reference document: &lt;<a href="https://github.com/KeefeL/greenfield-docs/blob/update-create" target="_blank" rel="noopener noreferrer">https://github.com/KeefeL/greenfield-docs/blob/update-create</a> -validator/docs/guide/storage-provider/run-book/run-testnet-SP-node.md&gt;</p><p>The value of P2P<!-- -->_<!-- -->PRIVATE<!-- -->_<!-- -->KEY needs to be obtained by executing the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./gnfd-sp p2p.create.key -n 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.11
After all configuration modifications are completed, use kustomize to build a new k8s yaml file
Execute in the alicloud-sp/base/vendors/alicloud/large directory:
kustomize build . &gt; sp.yaml</p><p>Then execute kubectl apply -f sp.yaml to start the pod</p><p>4.12 View Pod status:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test large]# kubectl get pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">approver-859f7d674d-chhlq       1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">block-syncer-6df857c8fb-h9sh4   1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">downloader-7d66cf8dfb-4cnll     1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gateway-5d7b49b6dd-trdbf        1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gateway-5d7b49b6dd-w5464        1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">manager-54f85f5b96-vq679        1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata-64ff4ff945-rcmdz       1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">receiver-7bd6995f4d-c8czn       1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signer-6c9dd6686c-sbdmk         1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">taskexecutor-5d458dc454-f494r   1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">taskexecutor-5d458dc454-vbtwd   1/1     Running   0          18d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uploader-f6dfb66d6-54s2d        1/1     Running   0          18d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/storage-provider/run-book/infra-deployment/alibaba/Alibaba Cloud BNB Greenfield RunbookV2.4 English Version.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#greenfield-storage-provider-deployment-guide---alibaba-cloud" class="table-of-contents__link toc-highlight">Greenfield Storage Provider Deployment Guide - Alibaba Cloud</a><ul><li><a href="#pre-requisitesalibaba-cloud-ack-creation" class="table-of-contents__link toc-highlight">Pre-requisites(Alibaba Cloud ACK Creation)</a></li><li><a href="#pre-requisitesconnect-to-the-ack-cluster-through-ecs-on-the-alibaba-cloud" class="table-of-contents__link toc-highlight">Pre-requisites(Connect to the ACK cluster through ECS on the Alibaba Cloud)</a></li></ul></li><li><a href="#deploy-sp-by-using-alibaba-cloud-ack" class="table-of-contents__link toc-highlight">Deploy SP by using Alibaba Cloud ACK</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/greenfield-docs/assets/js/runtime~main.52086998.js"></script>
<script src="/greenfield-docs/assets/js/main.ab98da64.js"></script>
</body>
</html>