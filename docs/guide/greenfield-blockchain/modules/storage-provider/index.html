<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guide/greenfield-blockchain/modules/storage-provider">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Storage Provider | BNB Greenfield</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="decentralized storage, blockchain storage solution"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Storage Provider | BNB Greenfield"><meta data-rh="true" name="description" content="Abstract"><meta data-rh="true" property="og:description" content="Abstract"><link data-rh="true" rel="icon" href="/greenfield-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3LF005YNGZ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/greenfield-docs/blog/rss.xml" title="BNB Greenfield RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/greenfield-docs/blog/atom.xml" title="BNB Greenfield Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LSRFL0KHRR"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LSRFL0KHRR",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="BNB Greenfield" href="/greenfield-docs/opensearch.xml"><link rel="stylesheet" href="/greenfield-docs/assets/css/styles.52c35f0a.css">
<link rel="preload" href="/greenfield-docs/assets/js/runtime~main.c96f64d9.js" as="script">
<link rel="preload" href="/greenfield-docs/assets/js/main.f34e02b4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/greenfield-docs/"><div class="navbar__logo"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">BNB Greenfield</b></a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/guide/introduction/overview/">Guide</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/tutorials/overview/">Tutorials</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/api/endpoints/">API &amp; SDK</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/release-notes/releaseNotes/">Releases</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/faq/greenfield-faqs/">FAQs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bnb-chain/greenfield-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/greenfield-docs/docs/guide/home/">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/getting-started/overview/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/core-concept/accounts/">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/greenfield-docs/docs/guide/greenfield-blockchain/overview/">Greenfield Blockchain</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/overview/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module/">Modules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module/">Storage Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/">Storage Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/">Billing and Payment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/">Permission</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/cross-chain/">Cross Chain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/consensus-and-staking/">Consensus and Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/governance/">Governance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/data-availability-challenge/">Data Availability Challenge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/virtual-group/">Virtual Group</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/world-state/">World State</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/run-node/interact-node/">Run Node</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/storage-provider/introduction/overview/">Storage Provider</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/greenfield-docs/docs/contribute/">Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/bnb-chain/greenfield-whitepaper" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Whitepaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/greenfield-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Greenfield Blockchain</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Modules</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Storage Provider</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12"><h1>Storage Provider</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a class="hash-link" href="#abstract" title="Direct link to heading">​</a></h2><p>The storage providers (SP) are storage service infrastructures that organizations or individuals provide and the
corresponding roles they play. They use Greenfield as the ledger and the single source of truth. Each SP can and
will respond to users&#x27; requests to write (upload) and read (download) data, and serve as the gatekeeper for
user rights and authentications.</p><p>The SP module is responsible for managing and keeping storage providers in the network. This includes:</p><ul><li><strong>Metadata</strong>: Basic information, such as address, tokens, and status, about each SP.</li><li><strong>Deposit</strong>: Aspiring SPs must stake tokens to guarantee their capacity to offer storage services.</li><li><strong>Slash</strong>: Stored data on an SP is occasionally challenged. If the challenge succeeds, the SP is penalized by losing some of its staked tokens.</li><li><strong>Reputation</strong>: We are implementing a reputation system to assess the quality of each SP&#x27;s service. Users can select an SP based on its reputation score to store their data.</li><li><strong>Exit</strong>: SPs can leave voluntarily as long as they adhere to specific rules and recover their staked tokens. Greenfield may also force an SP to exit if it lacks sufficient staked tokens or its reputation score falls below the minimum requirements for an SP.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-workflow">Key Workflow<a class="hash-link" href="#key-workflow" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="join-the-network">Join the network<a class="hash-link" href="#join-the-network" title="Direct link to heading">​</a></h3><p>SPs have to register themselves first by depositing BNB tokens on the Greenfield blockchain as their &quot;Service Stake&quot;.
The validators will go through a dedicated governance procedure to vote for the SPs of their election. SPs are encouraged to
advertise their information and prove to the community their capability, as SPs have to provide a professional storage
system with high-quality SLA.</p><p>It will take several transactions to join the greenfield storage network for storage provider.</p><ol><li>The funding account of SP should grant the governance module account to deduct tokens for staking;</li><li>The SP submit a <code>CreateStorageProvider</code> proposal to governance module;</li><li>Deposit enough BNB tokens for the proposal;</li><li>The validators should either vote <code>Pass</code> or <code>reject</code> for the proposal;</li><li>When more than half of the validators have voted, the storage provider will be automatically created on chain.</li><li>The SP status will be <code>STATUS_IN_MAINTENANCE</code> after created, it must send a transaction to update its status to <code>STATUS_IN_SERVICE</code> to activate itself.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="leave-the-network">Leave the network<a class="hash-link" href="#leave-the-network" title="Direct link to heading">​</a></h3><p>When the SPs join or leave the network, they have to follow a series of actions to ensure data redundancy for the
users; otherwise, their &quot;Service Stake&quot; will be fined. This is achieved through the data availability challenge and
validator governance votes.</p><p>For more information, please see <a href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/virtual-group/#sp-exit-workflow">SP exit</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state">State<a class="hash-link" href="#state" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storageprovider">StorageProvider<a class="hash-link" href="#storageprovider" title="Direct link to heading">​</a></h3><p>The storage provider can be in one of these several statuses:</p><ul><li><code>STATUS_IN_SERVICE</code>: The SP is in service. it can serve user&#x27;s Create/Upload/Download request.</li><li><code>STATUS_IN_MAINTENANCE</code>: The SP is in maintenance. it can not serve user&#x27;s Create/Upload request. It might be able to serve Download request.</li><li><code>STATUS_GRACEFUL_EXITING</code>: The SP is exiting gracefully. All the object stored in it will be shifted to another sp.</li></ul><p>The storage providers metadata should be primarily stored and accessed by the <code>OperatorAddr</code>, an EIP712 account address
for the operator of the storage provider. Three additional indices are maintained per storage provider metadata in
order to fulfill required lookups for SealObject/Deposit/Slash/GetApproval.</p><ul><li>StorageProvider: <code>0x21 | OperatorAddr -&gt; ProtocolBuffer(StorageProvider)</code></li><li>StorageProviderByFundingAddress: <code>0x22 | FundingAddress -&gt; OperatorAddr</code></li><li>StorageProviderBySealAddress: <code>0x23 | SealAddress -&gt; OperatorAddr</code></li><li>StorageProviderByApprovalAddress: <code>0x24 | ApprovalAddress -&gt; OperatorAddr</code></li></ul><p>Each storage provider&#x27;s state is stored in a <code>StorageProvider</code> struct.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// StorageProvider defines the meta info of storage provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message StorageProvider {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // // id is the identifier of the storage provider, used in virtual group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint32 id = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // operator_address defines the account address of the storage provider&#x27;s operator; It also is the unique index key of sp.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string operator_address = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // funding_address defines one of the storage provider&#x27;s accounts which is used to deposit and reward.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string funding_address = 3 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // seal_address defines one of the storage provider&#x27;s accounts which is used to SealObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string seal_address = 4 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // approval_address defines one of the storage provider&#x27;s accounts which is used to approve use&#x27;s migrateBucket request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string approval_address = 5 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // gc_address defines one of the storage provider&#x27;s accounts which is used for gc purpose.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string gc_address = 6 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // maintenance_address defines one of the storage provider&#x27;s accounts which is used for testing while in maintenance mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string maintenance_address = 7 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // total_deposit defines the number of tokens deposited by this storage provider for staking.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string total_deposit = 8 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // status defines the current service status of this storage provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Status status = 9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // endpoint define the storage provider&#x27;s network service address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string endpoint = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // description defines the description terms for the storage provider.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Description description = 11 [(gogoproto.nullable) = false];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // bls_key defines the bls pub key of the Storage provider for sealing object and completing migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bytes bls_key = 12;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="params">Params<a class="hash-link" href="#params" title="Direct link to heading">​</a></h3><p>Params is a module-wide configuration structure that stores system parameters
and defines overall functioning of the SP module.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Params defines the parameters for the module.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message Params {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (gogoproto.equal) = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (gogoproto.goproto_stringer) = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // deposit_denom defines the staking coin denomination.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string deposit_denom = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // min_deposit defines the minimum deposit amount for storage providers.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string min_deposit = 2 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the ratio of the store price of the secondary sp to the primary sp, the default value is 12%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string secondary_sp_store_price_ratio = 3 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // previous blocks that be traced back to for maintenance_records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 num_of_historical_blocks_for_maintenance_records = 4 [(gogoproto.moretags) = &quot;yaml:\&quot;num_of_historical_blocks_for_maintenance_records\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the max duration that a SP can be in_maintenance within num_of_historical_blocks_for_maintenance_records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 maintenance_duration_quota = 5 [(gogoproto.moretags) = &quot;yaml:\&quot;maintenance_duration_quota\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the number of blocks to be wait for sp to be in maintenance mode again if already requested</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 num_of_lockup_blocks_for_maintenance = 6 [(gogoproto.moretags) = &quot;yaml:\&quot;num_of_lockup_blocks_for_maintenance\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the time interval to update global storage price, if it is not set then the price will be updated at the first block of each natural month</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 update_global_price_interval = 7 [(gogoproto.moretags) = &quot;yaml:\&quot;update_global_price_interval\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the days counting backwards from end of a month in which a sp cannot update its price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint32 update_price_disallowed_days = 8 [(gogoproto.moretags) = &quot;yaml:\&quot;update_price_disallowed_days\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-pool">Deposit Pool<a class="hash-link" href="#deposit-pool" title="Direct link to heading">​</a></h3><p>The SP module uses its module account to manage all the staking tokens deposited by storage providers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message">Message<a class="hash-link" href="#message" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgcreatestorageprovider">MsgCreateStorageProvider<a class="hash-link" href="#msgcreatestorageprovider" title="Direct link to heading">​</a></h3><p>A storage provider is created using the <code>MsgCreateProvider</code> messages.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message MsgCreateStorageProvider {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;creator&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Description description = 2 [(gogoproto.nullable) = false];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string sp_address = 3 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string funding_address = 4 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string seal_address = 5 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string approval_address = 6 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string gc_address = 7 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string maintenance_address = 8 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string endpoint = 9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cosmos.base.v1beta1.Coin deposit = 10 [(gogoproto.nullable) = false];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string read_price = 11 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 free_read_quota = 12;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string store_price = 13 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string bls_key = 14;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string bls_proof = 15;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This message is expected to fail if:</p><ul><li>Another storage provider with this operator/seal/funding/approval address is already registered;</li><li>The initial deposit tokens do not belong to the denomination that is specified as the deposit denomination of the SP module;</li><li>The deposit tokens is insufficient.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgeditstorageprovider">MsgEditStorageProvider<a class="hash-link" href="#msgeditstorageprovider" title="Direct link to heading">​</a></h3><p>The metadata of a storage provider can be edited by using <code>MsgEditStorageProvider</code> messages.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// MsgEditStorageProvider defines a SDK message for editing an existed SP.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message MsgEditStorageProvider {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;sp_address&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string sp_address = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string endpoint = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Description description = 3 [(gogoproto.nullable) = false];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string seal_address = 4 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string approval_address = 5 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string gc_address = 6 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string maintenance_address = 7 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string bls_key = 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string bls_proof = 9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This message is expected to fail if:</p><ul><li>The storage provider is not existed.</li><li>The description fields are too large.</li><li>The bls_proof verification failed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgdeposit">MsgDeposit<a class="hash-link" href="#msgdeposit" title="Direct link to heading">​</a></h3><p>When the deposit tokens of a storage provider are insufficient, it can use <code>MsgDeposit</code> messages to resupply the
deposit tokens.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// MsgDeposit defines a SDK message to deposit token for SP.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message MsgDeposit {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;creator&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // creator is the msg signer, it should be SP address or sp&#x27;s fund address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // sp_address is the operator address of sp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string sp_address = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // deposit is a mount of token which used to deposit for SP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cosmos.base.v1beta1.Coin deposit = 3 [(gogoproto.nullable) = false];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This message is expected to fail if:</p><ul><li>The storage provider doesn&#x27;t exist;</li><li>The tokens that are deposited do not belong to the denomination that is specified as the deposit denomination of the SP module.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgupdatestorageproviderstatus">MsgUpdateStorageProviderStatus<a class="hash-link" href="#msgupdatestorageproviderstatus" title="Direct link to heading">​</a></h3><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// MsgUpdateStorageProviderStatus is used to update the status of a SP by itself</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message MsgUpdateStorageProviderStatus {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;sp_address&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string sp_address = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Status status = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 duration = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This message is expected to fail if:</p><ul><li>The storage provider doesn&#x27;t exist;</li><li>The status is not changed</li><li>The restrictions violated</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updatespstorageprice">UpdateSpStoragePrice<a class="hash-link" href="#updatespstorageprice" title="Direct link to heading">​</a></h3><p>A storage provider can update its free read quote, suggested primary store price and read price. All SPs&#x27; suggested primary store and
read prices will be used to generate the global primary/secondary store price and read price. </p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// MsgUpdateSpStoragePrice defines a SDK message to update its prices of a SP.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message MsgUpdateSpStoragePrice {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;sp_address&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // sp address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string sp_address = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // read price, in bnb wei per charge byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string read_price = 2 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // free read quota, in byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 free_read_quota = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // store price, in bnb wei per charge byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string store_price = 4 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This message is expected to fail if:</p><ul><li>The storage provider doesn&#x27;t exist;</li><li>The storage provider tries to update its prices in the last <code>update_price_disallowed_days</code> (default value is 2) days.</li></ul></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/greenfield-blockchain/modules/storage-provider.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Storage Module</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Billing and Payment</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abstract" class="table-of-contents__link toc-highlight">Abstract</a></li><li><a href="#key-workflow" class="table-of-contents__link toc-highlight">Key Workflow</a><ul><li><a href="#join-the-network" class="table-of-contents__link toc-highlight">Join the network</a></li><li><a href="#leave-the-network" class="table-of-contents__link toc-highlight">Leave the network</a></li></ul></li><li><a href="#state" class="table-of-contents__link toc-highlight">State</a><ul><li><a href="#storageprovider" class="table-of-contents__link toc-highlight">StorageProvider</a></li><li><a href="#params" class="table-of-contents__link toc-highlight">Params</a></li><li><a href="#deposit-pool" class="table-of-contents__link toc-highlight">Deposit Pool</a></li></ul></li><li><a href="#message" class="table-of-contents__link toc-highlight">Message</a><ul><li><a href="#msgcreatestorageprovider" class="table-of-contents__link toc-highlight">MsgCreateStorageProvider</a></li><li><a href="#msgeditstorageprovider" class="table-of-contents__link toc-highlight">MsgEditStorageProvider</a></li><li><a href="#msgdeposit" class="table-of-contents__link toc-highlight">MsgDeposit</a></li><li><a href="#msgupdatestorageproviderstatus" class="table-of-contents__link toc-highlight">MsgUpdateStorageProviderStatus</a></li><li><a href="#updatespstorageprice" class="table-of-contents__link toc-highlight">UpdateSpStoragePrice</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/greenfield-docs/assets/js/runtime~main.c96f64d9.js"></script>
<script src="/greenfield-docs/assets/js/main.f34e02b4.js"></script>
</body>
</html>