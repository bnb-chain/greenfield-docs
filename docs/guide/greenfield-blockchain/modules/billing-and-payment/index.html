<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guide/greenfield-blockchain/modules/billing-and-payment">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Billing and Payment | BNB Greenfield</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="decentralized storage, blockchain storage solution"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Billing and Payment | BNB Greenfield"><meta data-rh="true" name="description" content="If you&#x27;re interested in knowing the real-time pricing for storage and querying on Greenfield, we invite you to"><meta data-rh="true" property="og:description" content="If you&#x27;re interested in knowing the real-time pricing for storage and querying on Greenfield, we invite you to"><link data-rh="true" rel="icon" href="/greenfield-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3LF005YNGZ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/greenfield-docs/blog/rss.xml" title="BNB Greenfield RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/greenfield-docs/blog/atom.xml" title="BNB Greenfield Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LSRFL0KHRR"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LSRFL0KHRR",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="BNB Greenfield" href="/greenfield-docs/opensearch.xml"><link rel="stylesheet" href="/greenfield-docs/assets/css/styles.52c35f0a.css">
<link rel="preload" href="/greenfield-docs/assets/js/runtime~main.bba8cde1.js" as="script">
<link rel="preload" href="/greenfield-docs/assets/js/main.0d93359b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/greenfield-docs/"><div class="navbar__logo"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">BNB Greenfield</b></a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/guide/introduction/overview/">Guide</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/tutorials/overview/">Tutorials</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/api/endpoints/">API &amp; SDK</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/release-notes/releaseNotes/">Releases</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/faq/greenfield-faqs/">FAQs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bnb-chain/greenfield-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/greenfield-docs/docs/guide/home/">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/getting-started/overview/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/core-concept/accounts/">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/greenfield-docs/docs/guide/greenfield-blockchain/overview/">Greenfield Blockchain</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/overview/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module/">Modules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module/">Storage Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/">Storage Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/">Billing and Payment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/">Permission</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/cross-chain/">Cross Chain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/consensus-and-staking/">Consensus and Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/governance/">Governance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/data-availability-challenge/">Data Availability Challenge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/virtual-group/">Virtual Group</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/world-state/">World State</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/run-node/interact-node/">Run Node</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/storage-provider/introduction/overview/">Storage Provider</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/greenfield-docs/docs/contribute/">Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/bnb-chain/greenfield-whitepaper" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Whitepaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/greenfield-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Greenfield Blockchain</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Modules</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Billing and Payment</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12"><h1>Billing and Payment</h1><p>If you&#x27;re interested in knowing the real-time pricing for storage and querying on Greenfield, we invite you to
the <a href="https://dcellar.io/pricing-calculator" target="_blank" rel="noopener noreferrer">Price Calculator</a>.</p><p>The fees are paid on Greenfield in the style of
<code>Stream</code> from users to Global Virtual Groups and Global Virtual Group Families at a constant rate.
The fees are charged every second as they are used.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts-and-formulas">Concepts and Formulas<a class="hash-link" href="#concepts-and-formulas" title="Direct link to heading">​</a></h2><p>Streaming is a constant by-the-second movement of funds from a sending
account to a receiving account. Instead of sending payment transactions
now and then, Greenfield records the static balance, the latest update
timestamp, and flow rate in its payment module, and calculates the
dynamic balance with a formula using this data in the records. If the
net flow rate is not zero, the dynamic balance will change as time
elapses.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">​</a></h3><ul><li><p><strong>Payment Module:</strong> This module is a special ledger system designed
to manage billing and payments on the Greenfield blockchain.
Funds will be deposited or charged into it from users&#x27; balance or
payment accounts via the Payment Module;</p></li><li><p><strong>Stream Account</strong>: The Payment Module has its own ledger for
billing management. Users can deposit and withdraw funds into
their corresponding &quot;accounts&quot; on the payment module ledger. These
accounts are called <code>Stream Account</code>, which will directly interact
with the stream payment functions and bill the users for the
storage and data service;</p></li><li><p><strong>Payment Account</strong>: Payment account has been discussed in other
sections of Part 1 and Part 3 already. It is actually a type of
Stream Account. Users can create different payment accounts and
associate it with different buckets for different purposes;</p></li><li><p><strong>Payment Stream:</strong> Whenever the users add, delete or change a storage
object or download a data package, they add or change one or more
<code>payment streams</code> for that service provided by SPs;</p></li><li><p><strong>Flow Rate</strong>: The per-second rate at which a sender decreases its
net outflow stream and increases a receiver&#x27;s net inflow stream
when creating or updating a payment stream;</p></li><li><p><strong>Netflow Rate</strong>: The per-second rate that an account&#x27;s balance is
changing. It is the sum of the account&#x27;s inbound and outbound
flow rates;</p></li><li><p><strong>Sender</strong>: The stream account that starts the payment stream by
specifying a receiver and a flow rate at which its net flow
decreases;</p></li><li><p><strong>Receiver</strong>: The stream account on the receiving end of one or more payment streams.</p></li><li><p><strong>CRUD Timestamp</strong>: The timestamp that indicates when a user
creates, updates, or deletes a payment stream;</p></li><li><p><strong>Delta Balance</strong>: The amount of the stream account&#x27;s balance that has
changed since the latest CRUD timestamp due to the flow. It can be
positive or negative;</p></li><li><p><strong>Static Balance</strong>: The balance of the stream account at the latest
CRUD timestamp;</p></li><li><p><strong>Dynamic Balance</strong>: The actual balance of a stream account. It is
the sum of the Static Balance and the Delta Balance.</p></li></ul><p>When a user&#x27;s stream account is initiated in the payment module by
deposit, several fields will be recorded for this stream account:</p><ul><li><p><strong>CRUD Timestamp</strong> - will be the timestamp at the time;</p></li><li><p><strong>Static Balance</strong> - will be the deposit amount;</p></li><li><p><strong>Netflow Rate</strong> - will be 0;</p></li><li><p><strong>Buffer Balance</strong> - will be 0.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="formula">Formula<a class="hash-link" href="#formula" title="Direct link to heading">​</a></h3><p><em><span style="color:#6495ED">Static Balance</span> = Initial Balance at latest CRUD timestamp</em></p><p><em><span style="color:#556B2F">Delta Balance</span> = Netflow Rate <!-- -->*<!-- --> Seconds elapsed since latest CRUD timestamp</em></p><p><em><span style="color:#CD5C5C">Current Balance</span> = <span style="color:#6495ED">Static Balance</span> + <span style="color:#556B2F">Delta Balance</span></em></p><p><em><span style="color:#FFDEAD">Buffer Balance</span> = - Netflow Rate <!-- -->*<!-- --> pre-configured ReserveTime if Netflow Rate is negative</em></p><p><img loading="lazy" alt="funds-flow" src="/greenfield-docs/assets/images/04-Funds-Flow-6427f84b2e439b031ad3515245bb7329.jpg" width="982" height="500" class="img_ev3q"></p><div style="text-align:center"><i>How a User Receives Inflow and Outflow of Funds</i></div><p>Every time a user creates, updates, or deletes a payment stream, many
variables in the above formulas will be updated and the users&#x27; stream accounts in the
payment module will be settled.</p><ul><li><p>The net flow for the user&#x27;s stream account in the payment module
will be re-calculated to net all of its inbound and outbound flow
rates by adding/removing the new payment stream against the
current NetFlow Rate. (E.g. when a user creates a new object whose
price is \$0.4/month, its NetFlow Rate will add -\$0.4/month);</p></li><li><p>If the NetFlow rate is negative, the associated amount of BNB will
be reserved in a buffer balance. It is used to avoid the dynamic
balance becoming negative. When the dynamic balance becomes under
the threshold, the account will be forced settled;</p></li><li><p>CRUD Timestamp will become the current timestamp;</p></li><li><p>Static Balance will be re-calculated. The previous dynamic balance
will be settled. The new static Balance will be the Current
Balance plus the change of the Buffer Balance.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-workflow">Key Workflow<a class="hash-link" href="#key-workflow" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-and-withdrawal">Deposit and Withdrawal<a class="hash-link" href="#deposit-and-withdrawal" title="Direct link to heading">​</a></h3><p>All users can deposit and withdraw BNB in the payment
module. The <code>StaticBalance</code> in the <code>StreamRecord</code> data struct will be
&quot;settled&quot; first: the <code>CRUDTimeStamp</code> will be updated and <code>StaticBalance</code>
will be netted with <code>DeltaBalance</code>. Then the deposit and withdrawal number
will try to add/reduce the <code>StaticBalance</code> in the record. If the static
balance is less than the withdrawal amount, the withdrawal will fail. If
the withdrawal amount is equal to or greater than 100BNB, it will be
timelock-ed for 1 day duration.</p><p>Deposit and withdrawal via cross-chain will also be supported to enable
users to deposit and withdraw from BSC directly.</p><p>Specifically, the payment deposit can be triggered automatically during
the creation of objects or the addition of data packages. As long as
users have assets in their address accounts and payment accounts, the
payment module may directly charge the users by moving the funds from
address accounts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="payment-stream">Payment Stream<a class="hash-link" href="#payment-stream" title="Direct link to heading">​</a></h3><p>Payment streams are flowing in one direction. Whenever the users deposit
from their address accounts into the stream accounts (including users&#x27;
default stream account and created payment accounts), the funds first go
from the users&#x27; address accounts to a system account maintained by the
Payment Module, although the fund size and other payment parameters will
be recorded on the users&#x27; stream account, i.e. the <code>StreamRecord</code> record,
in the Payment Module ledger. When the payment is settled, the funds
will go from the system account to Global Virtual Groups&#x27; or Global Virtual
Group Families&#x27; virtual funding addresses according to
their in-flow calculation.</p><p>Every time users do the actions below, their <code>StreamRecord</code> will
be updated:</p><ul><li><p>Creating an object will create new streams to the Global Virtual Groups
and Global Virtual Group Family;</p></li><li><p>Deleting an object will delete associated streams to the Global Virtual Groups
and Global Virtual Group Family;</p></li><li><p>Adjusting the read quota will
create/delete/update the associated streams.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="forced-settlement">Forced Settlement<a class="hash-link" href="#forced-settlement" title="Direct link to heading">​</a></h3><p>If a user doesn&#x27;t deposit for a long time, his previous deposit may be
all used up for the stored objects. Greenfield has a forced settlement
mechanism to ensure enough funds are secured for further service fees.</p><p>There are two configurations, <code>ReserveTime</code> and <code>ForcedSettleTime</code>.</p><p>Let&#x27;s take an example where the <code>ReserveTime</code> is 7 days and the <code>ForcedSettleTime</code> is 1 day.
If a user wants to store an object at the price of
approximately $0.1 per month($0.00000004/second), he must reserve fees
for 7 days in the buffer balance, which is <code>$0.00000004 * 7 * 86400 =
$0.024192</code>. If the user deposits is $1 initially, the stream payment
record will be as below:</p><ul><li><p><strong>CRUD Timestamp</strong>: 100;</p></li><li><p><strong>Static Balance</strong>: $0.975808;</p></li><li><p><strong>Netflow Rate</strong>: -$0.00000004/sec;</p></li><li><p><strong>Buffer Balance</strong>: $0.024192.</p></li></ul><p>After 10000 seconds, the dynamic balance of the user will be <code>0.975808 - 10000 * 0.00000004 = 0.975408</code>.</p><p>After 24395200 seconds(approximately 282 days), the dynamic balance of
the user will become negative. Users should have some alarms for such
events that remind them to supply more funds in time.</p><p>If no more funds are supplied and the dynamic balance plus buffer
balance is under the forced settlement threshold, the account will be
forcibly settled. All payment streams of the account will be closed and
the account will be marked as out of balance. The download speed for all
objects associated with the account or payment account will be
downgraded. The objects will be deleted by the SPs if no fund is
provided within the predefined threshold.</p><p>The forced settlement will also charge some fees which is another
incentive for users to replenish funds proactively.</p><p>Let&#x27;s say the <code>ForceSettlementTime</code> variable is set to 1 day. After 24913601
seconds(approximately 288 days), the dynamic balance becomes <code>0.975808 -
24913601 *0.00000004 = -0.02073604</code>, plus the buffer balance is
$0.00345596. The forced settlement threshold is <code>86400* 0.00000004 =
0.003456</code>. The forced settlement will be triggered, and the record of the
user will become as below:</p><ul><li><p><strong>CRUD Timestamp</strong>: 24913701;</p></li><li><p><strong>Static Balance</strong>: \$0;</p></li><li><p><strong>Netflow Rate</strong>: \$0/sec;</p></li><li><p><strong>Buffer Balance</strong>: \$0.</p></li></ul><p>The validators will get the remaining $0.00345596 as a reward. The
account will be marked as &quot;frozen&quot; and his objects get downgraded
by SPs.</p><p>Every time a stream record is updated, Greenfield calculates the time
when the account will be out of balance. So Greenfield can keep an
on-chain list to trace the timestamps for the potential forced
settlement. The list will be checked by the end of every block
processing. When the block time passes the forced settlement timestamp,
the settlement of the associated stream accounts will be triggered
automatically. There is another parameter <code>MaxAutoSettleFlowCount</code> controls
how many outflows (not <code>StreamRecord</code>) will be force settled in a block.</p><p>For example, when <code>MaxAutoSettleFlowCount</code> is 10, and a <code>StreamRecord</code> has 15
outflows, it will take 2 blocks to totally force settle the record, and in the
first block, the account will be marked as &quot;frozen&quot;.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="payment-account">Payment Account<a class="hash-link" href="#payment-account" title="Direct link to heading">​</a></h3><p>Payment account is a special &quot;Stream Account&quot; type in the Payment
Module. Users can create multiple payment accounts and have the
permission to link buckets to different payment accounts to pay for
storage and data package.</p><p>The payment accounts have the below traits:</p><ul><li><p>Every user can create multiple payment accounts. The payment
accounts created by the user are recorded with a map on the
Greenfield blockchain.</p></li><li><p>The address format of the payment account is the same as normal
accounts. It&#x27;s derived by the hash of the user address and
payment account index. The payment account only exists in the
storage payment module. Users can deposit into, withdraw from and
query the balance of payment accounts in the payment module, which
means payment accounts cannot be used for transfer or staking.</p></li><li><p>Users can only associate their buckets with their payment accounts
to pay for storage and bandwidth. Users cannot associate their own
buckets with others&#x27; payment accounts, and users cannot associate
others&#x27; buckets with their own payment accounts.</p></li><li><p>The owner of a payment account is the user who creates it. The owner
can set it non-refundable. It&#x27;s a one-way setting and can not be
revoked. Thus, users can set some objects as &quot;public goods&quot; which
can receive donations for storage and bandwidth while preserving
the ownership.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-freeze-and-resume">Account Freeze and Resume<a class="hash-link" href="#account-freeze-and-resume" title="Direct link to heading">​</a></h3><p>If a payment account is out of balance, it will be settled and set a
flag as out of balance.</p><p>The <code>NetflowRate</code> will be set to 0, while the current settings of the
stream pay will be backed up in another data structure. The download
speed for all objects under this account will be downgraded.</p><p>If someone deposits BNB tokens into a frozen account and the static balance is
enough for reserved fees, the account will be resumed automatically. The
stream pay will be recovered from the backup. Usually, when user deposits to his
payment account, the payment account will be &quot;active&quot; quickly. However, if there
are many outflows associated to the payment account, the payment account will be
queued for resume and handled in the following blocks. There is a parameter
<code>MaxAutoResumeFlowCount</code> designed for this. For example, when <code>MaxAutoResumeFlowCount</code>
is 10, if a user wants to resume a payment account with 5 outflows, the payment account
will be &quot;active&quot; immediately, and if a user wants to resume a payment account with 15
outflow, it will take two blocks and finally the payment account will be &quot;active&quot;.</p><p>During the <code>OutOfBalance</code> period, no objects can be associated with this
payment account again, which results in no object can be created under
the bucket associated with the account.</p><p>If the associated object is deleted, the backup stream pay settings will
be changed accordingly to ensure it reflects the latest once the account
is resumed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-fee-price-and-adjustment">Storage Fee Price and Adjustment<a class="hash-link" href="#storage-fee-price-and-adjustment" title="Direct link to heading">​</a></h3><p>The cost of <strong>object storage fee</strong> and <strong>data package fee</strong> are composed of 3 parts:</p><ul><li>The primary SP will store the whole object file;</li><li>The secondary SPs will store part of the object file as a replica;</li><li>The primary SP will supply all the download requests of the object.</li></ul><p>Hence, there are 3 different on-chain prices globally, which are used to charge storage
and download:</p><ul><li>Primary SP Store Price;</li><li>Primary SP Read Price;</li><li>Secondary SP Store Price.</li></ul><p>Every SP can set their own suggested store price and read price via on-chain transactions.
At the first block of each month, the median all SPs&#x27; store prices will be calculated as
the Primary SP Store Price, the Secondary SP Store Price will be calculated as a proportion
of the Primary SP Store Price (e.g. 12%, which can be governed), and the median of all SPs&#x27;
read prices will be calculated as the Primary SP Read Price.</p><p>To make the global prices predictable to users and avoid price war, during the last two days
of a month all SPs are not allowed to set their own suggested prices.</p><p>The unit of price is a decimal, which indicates wei BNB per byte per second.
E.g. the price is 0.027, means approximately $0.022 / GB / Month.
(<code>0.027 * (30 * 86400) * (1024 * 1024 * 1024) * 300 / 10 ** 18 ≈ 0.022</code>, assume the BNB price is 300 USD)</p><p>The storage fees are calculated and charged in bucket level.
The primary store price, secondary store price, and primary read price are stored in the chain state
and the same for all buckets at a specific time.
The total size of all objects and per Global Virtual Group served size in a bucket will be recorded in the bucket
metadata.
The charge size will be used instead of the real size, e.g. files under 1KB will be charged as 1KB to cover the cost.
The payment bill will be calculated by the size statistics and prices, and it will be charged from
the stream account specified in the bucket to the Global Virtual Groups and Global Virtual Group family.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="payment-states">Payment States<a class="hash-link" href="#payment-states" title="Direct link to heading">​</a></h2><p>The payment module keeps state of the following primary objects:</p><ul><li>The stream payment ledger;</li><li>The payment accounts and total account created by users;</li><li>An AutoSettleRecord list to keep track of the auto-settle timestamp of the stream accounts.</li></ul><p>In addition, the payment module keeps the following indexes to manage the aforementioned state:</p><ul><li>StreamRecord Index. <code>address -&gt; StreamRecord</code>;</li><li>OutFlow Index. <code>address -&gt; OutFlow</code>;</li><li>PaymentAccount Index. <code>address -&gt; PaymentAccount</code>;</li><li>PaymentAccountCount Index. <code>address -&gt; PaymentAccountCount</code>;</li><li>AutoSettleRecord Index. <code>settle-timestamp | address -&gt; 0</code>.</li><li>AutoResumeRecord Index. <code>resume-timestamp | address -&gt; 0</code>.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message StreamRecord {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string account = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 crud_timestamp = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string netflow_rate = 3 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string staticBalance = 4 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string bufferBalance = 5 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string lockBalance = 6 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 status = 7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 settleTimestamp = 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 out_flow_count = 9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string frozen_netflow_rate = 10 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message OutFlow {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string to_address = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string rate = 2 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 status = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message PaymentAccount {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string addr = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string owner = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bool refundable = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message PaymentAccountCount {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string owner = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 count = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message AutoSettleRecord {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 timestamp = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string addr = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message AutoResumeRecord {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int64 timestamp = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string addr = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="payment-module-parameters">Payment Module Parameters<a class="hash-link" href="#payment-module-parameters" title="Direct link to heading">​</a></h2><p>The payment module contains the following parameters,
they can be updated with governance. The <code>VersionedParams</code> will keep track of
all versions of <code>ReserveTime</code> and <code>ValidatorTaxRate</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message Params {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  VersionedParams versioned_params = 1 [(gogoproto.nullable) = false];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The maximum number of payment accounts that can be created by one user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 payment_account_count_limit = 2 [(gogoproto.moretags) = &quot;yaml:\&quot;payment_account_count_limit\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Time duration threshold of forced settlement.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // If dynamic balance is less than NetOutFlowRate * forcedSettleTime, the account can be forced settled.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 forced_settle_time = 3 [(gogoproto.moretags) = &quot;yaml:\&quot;forced_settle_time\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the maximum number of flows that will be auto forced settled in one block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 max_auto_settle_flow_count = 4 [(gogoproto.moretags) = &quot;yaml:\&quot;max_auto_settle_flow_count\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // the maximum number of flows that will be auto resumed in one block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 max_auto_resume_flow_count = 5 [(gogoproto.moretags) = &quot;yaml:\&quot;max_auto_resume_flow_count\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The denom of fee charged in payment module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string fee_denom = 6 [(gogoproto.moretags) = &quot;yaml:\&quot;fee_denom\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The withdrawal amount threshold to trigger time lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string withdraw_time_lock_threshold = 7 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The duration of the time lock for a big amount withdrawal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 withdraw_time_lock_duration = 8 [(gogoproto.moretags) = &quot;yaml:\&quot;withdraw_time_lock_duration\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// VersionedParams defines the parameters with multiple versions, each version is stored with different timestamp.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message VersionedParams {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Time duration which the buffer balance need to be reserved for NetOutFlow e.g. 6 month</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 reserve_time = 1 [(gogoproto.moretags) = &quot;yaml:\&quot;reserve_time\&quot;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The tax rate to pay for validators in storage payment. The default value is 1%(0.01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string validator_tax_rate = 2 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Dec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th align="center">Key</th><th align="center">Type</th><th align="center">Example</th></tr></thead><tbody><tr><td align="center">reserve_time</td><td align="center">uint64</td><td align="center">15552000 (180 days)</td></tr><tr><td align="center">payment_account_count_limit</td><td align="center">uint64</td><td align="center">200</td></tr><tr><td align="center">forced_settle_time</td><td align="center">uint64</td><td align="center">604800 (7 days)</td></tr><tr><td align="center">max_auto_settle_flow_count</td><td align="center">uint64</td><td align="center">100</td></tr><tr><td align="center">max_auto_resume_flow_count</td><td align="center">uint64</td><td align="center">100</td></tr><tr><td align="center">fee_denom</td><td align="center">string</td><td align="center">BNB</td></tr><tr><td align="center">withdraw_time_lock_threshold</td><td align="center">Int</td><td align="center">100*1e18</td></tr><tr><td align="center">withdraw_time_lock_duration</td><td align="center">uint64</td><td align="center">86400 (1 day)</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="payment-module-keepers">Payment Module Keepers<a class="hash-link" href="#payment-module-keepers" title="Direct link to heading">​</a></h2><p>The payment module keeper provides access to query the parameters,
payment account owner, storage price and several ways to update the ledger.</p><p>Currently, it&#x27;s only used by the storage module.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type PaymentKeeper interface {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GetParams(ctx sdk.Context) paymenttypes.Params</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IsPaymentAccountOwner(ctx sdk.Context, addr string, owner string) bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GetStoragePrice(ctx sdk.Context, params paymenttypes.StoragePriceParams) (price paymenttypes.StoragePrice, err error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ApplyFlowChanges(ctx sdk.Context, from string, flowChanges []paymenttypes.OutFlow) (err error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ApplyUserFlowsList(ctx sdk.Context, userFlows []paymenttypes.UserFlows) (err error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UpdateStreamRecordByAddr(ctx sdk.Context, change *paymenttypes.StreamRecordChange) (ret *paymenttypes.StreamRecord, err error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="messages">Messages<a class="hash-link" href="#messages" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgcreatepaymentaccount">MsgCreatePaymentAccount<a class="hash-link" href="#msgcreatepaymentaccount" title="Direct link to heading">​</a></h3><p>Used to create new payment account for a user.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message MsgCreatePaymentAccount {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;creator&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // creator is the address of the stream account that created the payment account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgdeposit">MsgDeposit<a class="hash-link" href="#msgdeposit" title="Direct link to heading">​</a></h3><p>Used to deposit BNB tokens to a stream account.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message MsgDeposit {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;creator&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // creator is the message signer for MsgDeposit and the address of the account to deposit from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // to is the address of the account to deposit to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string to = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // amount is the amount to deposit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string amount = 3 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgwithdraw">MsgWithdraw<a class="hash-link" href="#msgwithdraw" title="Direct link to heading">​</a></h3><p>Used to withdraw BNB tokens from a stream account.</p><p>When the withdrawal amount is too large (i.e. equal to or greater than <code>withdraw_time_lock_threshold</code>, which is defined
as a payment parameter), the withdrawal will be timelock-ed for a specific duration (i.e. <code>withdraw_time_lock_duration</code>
seconds, which is also defined as a payment parameter), and after the duration the user can withdraw the locked amount
by sending a message without <code>from</code> field. For example, on testnet, when withdrawal amount is equal to or greater than
100 BNB, the withdrawal will be locked for 1 day duration.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message MsgWithdraw {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;creator&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // creator is the message signer for MsgWithdraw and the address of the receive account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // from is the address of the account to withdraw from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string from = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // amount is the amount to withdraw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string amount = 3 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgdisablerefund">MsgDisableRefund<a class="hash-link" href="#msgdisablerefund" title="Direct link to heading">​</a></h3><p>Used to make a stream account non-refundable.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message MsgDisableRefund {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;owner&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // owner is the message signer for MsgDisableRefund and the address of the payment account owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string owner = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // addr is the address of the payment account to disable refund</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string addr = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-storage-key-workflows">Related Storage Key Workflows<a class="hash-link" href="#related-storage-key-workflows" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-bucket">Create Bucket<a class="hash-link" href="#create-bucket" title="Direct link to heading">​</a></h3><p>When creating object, the <strong>data package</strong> can be defined by the bucket owner.
If the <strong>data package</strong> is not zero, there will be two outflows created for the payment account.</p><ul><li>the outflow going to Global Virtual Group Family will be created for read fee</li><li>the outflow going to validator tax pool will be created for extra validator tax fee</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-bucket">Update Bucket<a class="hash-link" href="#update-bucket" title="Direct link to heading">​</a></h3><p>The bucket owner can update the <strong>data package</strong> of his bucket, e.g., increasing the read quota.
Then the outflow will be updated to reflect the new quota.</p><ul><li>the outflow which goes to Global Virtual Group Family will be updated</li><li>the outflow which goes to validator tax pool will be updated</li></ul><p>The bucket owner can also assign new payment account to his bucket. In such case,</p><ul><li>old payment account&#x27;s outflow which goes to the Global Virtual Group Family will be decreased or removed</li><li>old payment account&#x27;s outflow which goes to validator tax pool will be decreased or removed</li><li>new payment accounts&#x27; outflow going to Global Virtual Group Family will be created for read fee</li><li>new payment accounts&#x27; outflow going to validator tax pool will be created for extra validator tax fee</li></ul><p>Be noted, if read fee or store fee has been changed (e.g., the primary sp updated its read fee), during updating bucket,
it will also recalculate the store fee for all objects in the bucket. After updating bucket,
the bucket need to pay using the new price for both <strong>object storage fee</strong> and <strong>data package fee</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-bucket">Delete Bucket<a class="hash-link" href="#delete-bucket" title="Direct link to heading">​</a></h3><p>When deleting a bucket, there should be no object in it. The related outflows will be updated,</p><ul><li>the outflow which goes to the Global Virtual Group Family will be decreased or removed</li><li>the outflow which goes to validator tax pool will be decreased or removed</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-object">Create Object<a class="hash-link" href="#create-object" title="Direct link to heading">​</a></h3><p>When creating an object which is not empty, there will be not outflow change for the bucket&#x27;s payment account.
However, some amount of BNB will be locked to make sure the payment account has enough BNB for storing the object
for at least <code>ReserveTime</code> long.</p><p>The locked fee is calculated as below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    primaryRate = PrimaryStorePrice * ChargeSize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    secondaryRate = SecondaryStorePrice * ChargeSize * SecondaySPNumber</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validatorTaxRate = ValidatorTaxRate * (primaryRate + secondaryRate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    totalRate = primaryRate + secondaryRate + validatorTaxRate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lockAmount = totalRate * ReserveTime</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>ChargeSize</code> is calculated from the object&#x27;s payload size, if the payload size is less than <strong>128KB</strong> then <code>ChargeSize</code> is <strong>128KB</strong>, otherwise <code>ChargeSize</code> is equal to payload size.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>To optimize your cost, it is advisable to consolidate small files into payloads exceeding <strong>128KB</strong>. Failing to do so may result in higher charges.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="seal-object">Seal Object<a class="hash-link" href="#seal-object" title="Direct link to heading">​</a></h3><p>When creating an object which is empty, it will be sealed directly.</p><p>When sealing object, the locked fee will be moved from lock balance to buffer balance and the following outflows will be
created for the payment account.</p><ul><li>the outflow going to Global Virtual Group Family will be created for primary store fee</li><li>the outflow going to Global Virtual Group will be created for secondary store fee</li><li>the outflow going to validator tax pool will be created for extra validator tax fee</li></ul><p>Be noted, if read fee or store fee has been changed (e.g., the primary sp updated its read fee), during sealing object,
it will also recalculate the read fee and the store fee for all objects in the bucket. After sealing object,
the bucket need to pay using the new price for both <strong>object storage fee</strong> and <strong>data package fee</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-object">Delete Object<a class="hash-link" href="#delete-object" title="Direct link to heading">​</a></h3><p>When deleting an object, the following outflows will be updated.</p><ul><li>the outflow which goes to Global Virtual Group Family will be decreased or removed</li><li>the outflow which goes to Global Virtual Group will be decreased or removed</li><li>the outflow which goes to validator tax pool will be decreased or removed</li></ul><p>Be noted, when deleting an object, if it is stored less than <code>ReserveTime</code>, it still needs to pay for
storing <code>ReserveTime</code>
and the unpaid fee will be transferred to Global Virtual Group Family, Global Virtual Group, and validator tax pool.</p></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/greenfield-blockchain/modules/billing-and-payment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Storage Provider</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Permission</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concepts-and-formulas" class="table-of-contents__link toc-highlight">Concepts and Formulas</a><ul><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#formula" class="table-of-contents__link toc-highlight">Formula</a></li></ul></li><li><a href="#key-workflow" class="table-of-contents__link toc-highlight">Key Workflow</a><ul><li><a href="#deposit-and-withdrawal" class="table-of-contents__link toc-highlight">Deposit and Withdrawal</a></li><li><a href="#payment-stream" class="table-of-contents__link toc-highlight">Payment Stream</a></li><li><a href="#forced-settlement" class="table-of-contents__link toc-highlight">Forced Settlement</a></li><li><a href="#payment-account" class="table-of-contents__link toc-highlight">Payment Account</a></li><li><a href="#account-freeze-and-resume" class="table-of-contents__link toc-highlight">Account Freeze and Resume</a></li><li><a href="#storage-fee-price-and-adjustment" class="table-of-contents__link toc-highlight">Storage Fee Price and Adjustment</a></li></ul></li><li><a href="#payment-states" class="table-of-contents__link toc-highlight">Payment States</a></li><li><a href="#payment-module-parameters" class="table-of-contents__link toc-highlight">Payment Module Parameters</a></li><li><a href="#payment-module-keepers" class="table-of-contents__link toc-highlight">Payment Module Keepers</a></li><li><a href="#messages" class="table-of-contents__link toc-highlight">Messages</a><ul><li><a href="#msgcreatepaymentaccount" class="table-of-contents__link toc-highlight">MsgCreatePaymentAccount</a></li><li><a href="#msgdeposit" class="table-of-contents__link toc-highlight">MsgDeposit</a></li><li><a href="#msgwithdraw" class="table-of-contents__link toc-highlight">MsgWithdraw</a></li><li><a href="#msgdisablerefund" class="table-of-contents__link toc-highlight">MsgDisableRefund</a></li></ul></li><li><a href="#related-storage-key-workflows" class="table-of-contents__link toc-highlight">Related Storage Key Workflows</a><ul><li><a href="#create-bucket" class="table-of-contents__link toc-highlight">Create Bucket</a></li><li><a href="#update-bucket" class="table-of-contents__link toc-highlight">Update Bucket</a></li><li><a href="#delete-bucket" class="table-of-contents__link toc-highlight">Delete Bucket</a></li><li><a href="#create-object" class="table-of-contents__link toc-highlight">Create Object</a></li><li><a href="#seal-object" class="table-of-contents__link toc-highlight">Seal Object</a></li><li><a href="#delete-object" class="table-of-contents__link toc-highlight">Delete Object</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/greenfield-docs/assets/js/runtime~main.bba8cde1.js"></script>
<script src="/greenfield-docs/assets/js/main.0d93359b.js"></script>
</body>
</html>