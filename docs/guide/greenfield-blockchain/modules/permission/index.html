<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guide/greenfield-blockchain/modules/permission">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Permission | BNB Greenfield</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="decentralized storage, blockchain storage solution"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Permission | BNB Greenfield"><meta data-rh="true" name="description" content="The permission module serves as the foundation for basic permission control management in the Greenfield Storage Network."><meta data-rh="true" property="og:description" content="The permission module serves as the foundation for basic permission control management in the Greenfield Storage Network."><link data-rh="true" rel="icon" href="/greenfield-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3LF005YNGZ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/greenfield-docs/blog/rss.xml" title="BNB Greenfield RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/greenfield-docs/blog/atom.xml" title="BNB Greenfield Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LSRFL0KHRR"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LSRFL0KHRR",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="BNB Greenfield" href="/greenfield-docs/opensearch.xml"><link rel="stylesheet" href="/greenfield-docs/assets/css/styles.52c35f0a.css">
<link rel="preload" href="/greenfield-docs/assets/js/runtime~main.ff3872e4.js" as="script">
<link rel="preload" href="/greenfield-docs/assets/js/main.bbe3fd77.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/greenfield-docs/"><div class="navbar__logo"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/greenfield-docs/img/logo.svg" alt="Greenfield Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">BNB Greenfield</b></a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/guide/introduction/overview/">Guide</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/tutorials/overview/">Tutorials</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/api/endpoints/">API &amp; SDK</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/release-notes/releaseNotes/">Releases</a><a class="navbar__item navbar__link" href="/greenfield-docs/docs/faq/greenfield-faqs/">FAQs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bnb-chain/greenfield-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/greenfield-docs/docs/guide/home/">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/getting-started/overview/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/core-concept/accounts/">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/greenfield-docs/docs/guide/greenfield-blockchain/overview/">Greenfield Blockchain</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/overview/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module/">Modules</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module/">Storage Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider/">Storage Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/">Billing and Payment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/permission/">Permission</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/cross-chain/">Cross Chain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/consensus-and-staking/">Consensus and Staking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/governance/">Governance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/data-availability-challenge/">Data Availability Challenge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/virtual-group/">Virtual Group</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/world-state/">World State</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/greenfield-docs/docs/guide/greenfield-blockchain/run-node/interact-node/">Run Node</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/greenfield-docs/docs/guide/storage-provider/introduction/overview/">Storage Provider</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/greenfield-docs/docs/contribute/">Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/bnb-chain/greenfield-whitepaper" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Whitepaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/greenfield-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Greenfield Blockchain</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Modules</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Permission</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12"><h1>Permission</h1><p>The permission module serves as the foundation for basic permission control management in the Greenfield Storage Network.</p><p>All data resources, such as objects, buckets, payment accounts, and groups, require specific permissions to be accessed.
These authorizations dictate the actions that can be taken by each account.</p><p><strong>Note</strong>: Groups are collections of accounts that share the same permissions, allowing them to be handled as a single entity.</p><p>Examples of permissions include:</p><ul><li>Put, List, Get, Delete, Copy, and Execute data objects;</li><li>Create, Delete, and List buckets</li><li>Create, Delete, ListMembers, Leave groups</li><li>Create, Associate payment accounts</li><li>Grant, Revoke the above permissions</li></ul><p>These permissions are linked to both the data resources and the accounts or groups authorized to access them.
The group definitions are publicly stored on the Greenfield blockchain, and are currently in plain text.
However, a privacy mode utilizing Zero Knowledge Proof technology is planned for future implementation.</p><p>Notably, permission operations can be directly executed from BSC, whether through smart contracts or an EOA, further enhancing their convenience.</p><p>Overall, the interface semantics of the permission module are similar to S3.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts">Concepts<a class="hash-link" href="#concepts" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">​</a></h3><ul><li><strong>Resources</strong>: Buckets, objects, and groups are the primary resources within the Greenfield network that require
permission authorization. These resources are identified through the Greenfield Resource Name (GRN) in policies.</li><li><strong>Actions</strong>: Each resource within Greenfield has a designated set of operations that can be performed on it. To specify which actions are allowed or denied, an action enum value must be provided.</li><li><strong>Principals</strong>: Accounts or groups that are granted permission to access specific resources and actions can be identified in the policy.</li><li><strong>Statements</strong>: Policies outline the specific details of permissions, including the Effect, ActionList, and Resources.</li><li><strong>Effect</strong>: The Effect sets the outcome when a user requests a particular action, and can be configured as either allow or deny.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource">Resource<a class="hash-link" href="#resource" title="Direct link to heading">​</a></h3><p>Greenfield utilizes resources, which are the main entities that can be manipulated.
Buckets, objects, and groups are all considered resources, and each has its own set of subresources.</p><p>Bucket subresources consist of the following:</p><ul><li><strong>BucketInfo</strong>: Allows for modification of specific fields in a bucket, such as <code>IsPublic</code>, <code>ReadQuota</code>, <code>paymentAccount</code>, etc;</li><li><strong>Policy</strong>: Stores permissions information for the bucket;</li><li><strong>Objects</strong>: Every object must be stored within a bucket;</li><li><strong>Object ownership</strong>: Newly uploaded objects are automatically transferred to the bucket owner, regardless of who uploaded them.</li></ul><p>Object subresources consist of the following:</p><ul><li><strong>ObjectInfo</strong>: Allows for modification of certain fields within an object, such as <code>IsPublic</code>, etc;</li><li><strong>Policy</strong>: Stores access permissions information for the object.</li></ul><p>Group subresources consist of the following:</p><ul><li><strong>GroupInfo</strong>: Allows for modification of specific fields within a group, such as members, user-meta, etc;</li><li><strong>Policy</strong>: Stores access permissions information for the group;</li><li><strong>GroupMember</strong>: Any account in Greenfield has the ability to join a group, but a group cannot become a member of another group; expiration time can be set for group membership if the member is expired the permission will be revoked.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ownership">Ownership<a class="hash-link" href="#ownership" title="Direct link to heading">​</a></h3><p>The resources owner refers to the account that creates the resource. By default, only the resource owner has the permission
to access its resources.</p><ul><li>The resource creator owns the resource.</li><li>Each resource only has one owner and the ownership cannot be transferred once the resource is created.</li><li>There are features that allow an account to &quot;approve&quot; another account to create and upload objects to be owned by the approver, as long as it is within limits.</li><li>The owner or payment account of the owner pays for the resource.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="definitions">Definitions<a class="hash-link" href="#definitions" title="Direct link to heading">​</a></h3><ul><li><strong>Ownership Permission</strong>: By default, the owner has all permissions on the resource.</li><li><strong>Public or Private Permission</strong>: By default, the resource is private, only the owner can access the resource. If a resource is public, anyone can access it.</li><li><strong>Shared Permission</strong>: These permissions are managed by the permission module. It usually manages who has permission for which resources.</li></ul><p>There are two types of shared permissions: Single Account Permission and Group Permission, which are stored in
different formats in the blockchain state.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="revoke">Revoke<a class="hash-link" href="#revoke" title="Direct link to heading">​</a></h3><p>Users can assign one or more permissions as needed. However, when a resource is deleted, its associated permissions
should also be removed, even if the user does not initiate the deletion – this can be managed through clean-up mechanisms.
If too many accounts have permission to delete an object, the processing time required may become excessively lengthy for
a single transaction to handle.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">​</a></h3><p>Let&#x27;s say Greenfield has two accounts, Bob(0x1110) and Alice(0x1111). A basic example scenario would be:</p><ul><li>Bob uploaded a picture named <code>avatar.jpg</code> into a bucket named &quot;profile&quot;;</li><li>Bob grants the <code>GetObject</code> action permission for the object <code>avatar.jpg</code> to Alice, it will store a <code>key 0x11 | ResourceID(
profile_avatar.jpg) | Address(Alice)</code> into a permission state tree;</li><li>when Alice wants to read the <code>avatar.jpg</code>, the SP should check the Greenfield blockchain that whether the <code>key Prefix(
ObjectPermission) | ResourceID(profile_avatar.jpg) | Address(Alice)</code> existed in the permission state tree, and whether
the action list contains GetObject.</li></ul><p>Let&#x27;s move on to more complex scenarios:</p><ul><li>Bob created a bucket named &quot;profile&quot;;</li><li>Bob grants the <code>PutObject</code> action permission for the bucket &quot;profile&quot; to Alice, the key <code>0x10 | ResourceID(profile) |
Address(Alice)</code> will be put into the permission state tree;</li><li>When Alice wants to upload an object named <code>avatar.jpg</code> into the bucket profile, it creates a <code>PutObject</code> transaction and
will be executed on the chain;</li><li>The Greenfield blockchain needs to confirm that Alice has permission to operate, so it checks whether the key <code>0x10 |
ResourceID(profile) | Address(Alice)</code> existed in the permission state tree and got the permission information if it
existed;</li><li>If the permission info shows that Alice has the <code>PutObject</code> action permission of the bucket profile, then she can do
<code>PutObject</code> operation.</li></ul><p>Another more complex scenario that contains groups:</p><ul><li>Bob creates a group named &quot;Games&quot;, and creates a bucket named &quot;profile&quot;.</li><li>Bob adds Alice to the Games group, the <code>key 0x12 | ResourceID(Games) | Address(Alice)</code> will be put into the permission
state tree</li><li>Bob put a picture <code>avatar.jpg</code> to the bucket profile and grants the <code>CopyObject</code> action permission to the group Games</li><li>When Alice wants to copy the object avatar.jpg . First, Greenfield blockchain checks whether she has permission via the
<code>key 0x11 | ResourceID(avatar.jpg) | Address(Alice)</code>; if it is a miss, Greenfield will iterate all groups that the object
<code>avatar.jpg </code>associates and check whether Alice is a member of one of these groups by checking, e.g. if the
<code>key 0x21 | ResourceID(group, e.g. Games)</code> existed, then iterate the <code>permissionInfo</code> map, and determine if Alice is in a group which
has the permission to do <code>CopyObject</code> operation via the key <code>0x12| ResourceID(Games) | Address(Alice)</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state">State<a class="hash-link" href="#state" title="Direct link to heading">​</a></h2><p>The permission module keeps state of the following primary objects:</p><ol><li><code>Policy</code>: The owner account of the resource grant its specify permission to another account;</li><li><code>PolicyGroup</code>: A limited list of <code>Policy</code>, and each <code>Policy</code> items defines the owner account of the resource grant
its specify permission to a group.</li></ol><p>These primary objects should be primarily stored and accessed by the <code>ID</code> which is an auto-incremented sequence. An
additional indices are maintained per primary objects in order to compatibility with the S3 object storage.</p><ul><li>BucketPolicyForAccount: <code>0x11 | BigEndian(BucketID) | AccAddress -&gt; BigEndian(PolicyID)</code></li><li>ObjectPolicyForAccount: <code>0x12 | BigEndian(ObjectID) | AccAddress -&gt; BigEndian(PolicyID)</code></li><li>GroupPolicyForAccount: <code>0x13 | BigEndian(GroupID) | AccAddress -&gt; BigEndian(PolicyID)</code></li><li>BucketPolicyForGroup: <code>0x21 | BigEndian(BucketID) -&gt; ProtoBuf(PolicyGroup)</code></li><li>ObjectPolicyForGroup: <code>0x22 | BigEndian(ObjectID) -&gt; ProtoBuf(PolicyGroup)</code></li><li>PolicyByID: <code>0x31 | BigEndian(PolicyID) -&gt; ProtoBuf(Policy)</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="policy">Policy<a class="hash-link" href="#policy" title="Direct link to heading">​</a></h3><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message Policy {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string id = 1 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  permission.Principal principal = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resource.ResourceType resource_type = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string resource_id = 4 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (cosmos_proto.scalar) = &quot;cosmos.Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.customtype) = &quot;Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated permission.Statement statements = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  permission.Statement member_statement = 6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="policygroup">PolicyGroup<a class="hash-link" href="#policygroup" title="Direct link to heading">​</a></h3><p>Each resource can only grant permissions to a limited number of groups and limited number is defined
by <code>MaximumGroupNum</code> in module params.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message PolicyGroup {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message Item {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string policy_id = 1 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (cosmos_proto.scalar) = &quot;cosmos.Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (gogoproto.customtype) = &quot;Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string group_id = 2 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (cosmos_proto.scalar) = &quot;cosmos.Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (gogoproto.customtype) = &quot;Uint&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (gogoproto.nullable) = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated Item items = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="params">params<a class="hash-link" href="#params" title="Direct link to heading">​</a></h3><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Params defines the parameters for the module.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message Params {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (gogoproto.goproto_stringer) = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 maximum_statements_num = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint64 maximum_group_num = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message">Message<a class="hash-link" href="#message" title="Direct link to heading">​</a></h2><blockquote><p>Notice: Permission-related messages are defined in the storage module</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="putpolicy">PutPolicy<a class="hash-link" href="#putpolicy" title="Direct link to heading">​</a></h3><p>Used to create a policy for a resource.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message MsgPutPolicy {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;operator&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // operator defines the granter who grant the permission to another principal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string operator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Principal define the roles that can be grant permissions to. Currently, it can be account or group.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  permission.Principal principal = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // resource define a greenfield standard resource name that can be generated by GRN structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string resource = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // statements define a list of individual statement which describe the detail rules of policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated permission.Statement statements = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // expiration_time defines the whole expiration time of all the statements.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // Notices: Its priority is higher than the expiration time inside the Statement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   google.protobuf.Timestamp expiration_time = 5 [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (gogoproto.stdtime) = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (gogoproto.nullable) = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deletepolicy">DeletePolicy<a class="hash-link" href="#deletepolicy" title="Direct link to heading">​</a></h3><p>Used to delete the policy that is associated with an account, group, and resource.</p><div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message MsgDeletePolicy {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  option (cosmos.msg.v1.signer) = &quot;operator&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // operator defines the granter who grant the permission to another principal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string operator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Principal define the roles that can be grant permissions to. Currently, it can be account or group.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  permission.Principal principal = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // resource define a greenfield standard resource name that can be generated by GRN structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string resource = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/greenfield-blockchain/modules/permission.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/billing-and-payment/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Billing and Payment</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/greenfield-docs/docs/guide/greenfield-blockchain/modules/cross-chain/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cross Chain</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concepts" class="table-of-contents__link toc-highlight">Concepts</a><ul><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#resource" class="table-of-contents__link toc-highlight">Resource</a></li><li><a href="#ownership" class="table-of-contents__link toc-highlight">Ownership</a></li><li><a href="#definitions" class="table-of-contents__link toc-highlight">Definitions</a></li><li><a href="#revoke" class="table-of-contents__link toc-highlight">Revoke</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#state" class="table-of-contents__link toc-highlight">State</a><ul><li><a href="#policy" class="table-of-contents__link toc-highlight">Policy</a></li><li><a href="#policygroup" class="table-of-contents__link toc-highlight">PolicyGroup</a></li><li><a href="#params" class="table-of-contents__link toc-highlight">params</a></li></ul></li><li><a href="#message" class="table-of-contents__link toc-highlight">Message</a><ul><li><a href="#putpolicy" class="table-of-contents__link toc-highlight">PutPolicy</a></li><li><a href="#deletepolicy" class="table-of-contents__link toc-highlight">DeletePolicy</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/greenfield-docs/assets/js/runtime~main.ff3872e4.js"></script>
<script src="/greenfield-docs/assets/js/main.bbe3fd77.js"></script>
</body>
</html>