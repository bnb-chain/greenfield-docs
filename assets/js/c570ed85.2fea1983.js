"use strict";(self.webpackChunkgreenfield_docs=self.webpackChunkgreenfield_docs||[]).push([[4702],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var a=r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=a.createContext({}),d=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,i=e.mdxType,n=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(r),m=i,h=p["".concat(s,".").concat(m)]||p[m]||u[m]||n;return r?a.createElement(h,o(o({ref:t},c),{},{components:r})):a.createElement(h,o({ref:t},c))}));function h(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=r.length,o=new Array(n);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:i,o[1]=l;for(var d=2;d<n;d++)o[d]=r[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5253:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>n,metadata:()=>l,toc:()=>d});var a=r(87462),i=(r(67294),r(3905));const n={},o="The Greenfield Storage Provider Standard",l={unversionedId:"guide/storage-provider/introduction/standard",id:"guide/storage-provider/introduction/standard",title:"The Greenfield Storage Provider Standard",description:"Abstract",source:"@site/docs/guide/storage-provider/introduction/standard.md",sourceDirName:"guide/storage-provider/introduction",slug:"/guide/storage-provider/introduction/standard",permalink:"/greenfield-docs/docs/guide/storage-provider/introduction/standard",draft:!1,editUrl:"https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/storage-provider/introduction/standard.md",tags:[],version:"current",frontMatter:{},sidebar:"guideSidebar",previous:{title:"SP Workflow",permalink:"/greenfield-docs/docs/guide/storage-provider/introduction/workflow"},next:{title:"Gateway",permalink:"/greenfield-docs/docs/guide/storage-provider/modules/gateway"}},s={},d=[{value:"Abstract",id:"abstract",level:2},{value:"Minimum Service Quality Standards",id:"minimum-service-quality-standards",level:2},{value:"Capacity",id:"capacity",level:3},{value:"Availability",id:"availability",level:3},{value:"Scalability(better to have)",id:"scalabilitybetter-to-have",level:3},{value:"Storage Provider Protocols",id:"storage-provider-protocols",level:2},{value:"HTTP RESTful API Specification",id:"http-restful-api-specification",level:3},{value:"Universal Endpoint",id:"universal-endpoint",level:3},{value:"Auth Methods",id:"auth-methods",level:3},{value:"Open source Implementation",id:"open-source-implementation",level:2},{value:"Interfaces",id:"interfaces",level:3},{value:"Modules",id:"modules",level:3},{value:"Minimal Hardware Requirement",id:"minimal-hardware-requirement",level:3},{value:"Secondary Development Examples",id:"secondary-development-examples",level:3},{value:"Documents",id:"documents",level:2}],c={toc:d},p="wrapper";function u(e){let{components:t,...r}=e;return(0,i.kt)(p,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"the-greenfield-storage-provider-standard"},"The Greenfield Storage Provider Standard"),(0,i.kt)("h2",{id:"abstract"},"Abstract"),(0,i.kt)("p",null,"BNB Greenfield is a decentralized storage network comprising two layers: blockchain and storage providers(SPs). The BNB Greenfield blockchain maintains ledgers for users and records storage metadata as common blockchain state data. SPs refer to storage service infrastructures provided by organizations or individuals. "),(0,i.kt)("p",null,"This standard aims to ensure SPs on Greenfield can provide enterprise-level, secure, reliable, and high-quality storage infrastructure and services to users. SPs that fail to meet the standards may have their eligibility and access revoked from the network."),(0,i.kt)("p",null,"The standards consist of two parts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Minimum service quality standards. The minimum service quality for SPs on various metrics on the mainnet, as well as the preferred requirements."),(0,i.kt)("li",{parentName:"ul"},"Storage provider protocols. The API and P2P protocol interfaces that SPs must implement.")),(0,i.kt)("p",null,"In addition to these standards, this document will introduce an official implementation of the SP protocols. Community developers are welcome to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"directly use the official implementation, which currently supports Kubernetes deployment and AWS S3, OSS, MinIO, B2, Ali Lindorm as the underlying storage."),(0,i.kt)("li",{parentName:"ul"},"extend the official implementation. The official solution has initially achieved modularity. SP developers can replace modules as needed."),(0,i.kt)("li",{parentName:"ul"},"refer to the SP protocol documentation to customize their own solutions.")),(0,i.kt)("h2",{id:"minimum-service-quality-standards"},"Minimum Service Quality Standards"),(0,i.kt)("h3",{id:"capacity"},"Capacity"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"2M/s uplink bandwidth"),": This is the minimum bandwidth requirement for SP nodes in uploading files. SP nodes must be able to stably upload files at a rate of at least 2 megabits per second."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"20M/s downlink bandwidth"),": This is the minimum bandwidth requirement for SP nodes in querying files. SP nodes must be able to provide 20M/s of download bandwidth."),(0,i.kt)("li",{parentName:"ul"},"2 files/s. This is the minimum requirement for SP nodes in file upload capability. SP nodes must be able to stably upload at least 2 files per second, the size of each test file can be 1M."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"1PB storage capacity"),": Because the SP needs to run several microservices, these computing resources will generate inevitable fixed costs. If the SP only provides a very small amount of storage capacity, it is difficult for the corresponding profits to cover these fixed costs. We hope that SP's storage capacity is unlimited.")),(0,i.kt)("h3",{id:"availability"},"Availability"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"99.9% SLA"),": The SLA here means the uptime of the SP API."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"99.99% data durability"),": Data durability refers to the ability to preserve and maintain data over time. It is a measure of how permanent and invulnerable the data is to loss or change. If the data durability of each SP can meet this standard, then the data stored using erasure coding and distributed across different SPs will have higher data durability guarantees.")),(0,i.kt)("p",null,"Greenfield will punish unavailable or poor quality SPs through challenge mechanisms. SPs with SLA below 99.9% or data durability below 99.99% are likely to be phased out. "),(0,i.kt)("p",null,"In the early stages of Greenfield, to encourage more inexperienced SPs to participate, Greenfield will apply a relatively relaxed slash mechanism to protect SPs from slashing more than 1 BNB within one hour."),(0,i.kt)("h3",{id:"scalabilitybetter-to-have"},"Scalability(better to have)"),(0,i.kt)("p",null,"We encourage SPs to dynamically scale up capacity on the basis of providing minimum capacity to avoid being unable to provide services due to sudden traffic and being slashed. The scaling strategy is related to the computing resource platform chosen by the SP. We do not make specific requirements in this regard."),(0,i.kt)("h2",{id:"storage-provider-protocols"},"Storage Provider Protocols"),(0,i.kt)("h3",{id:"http-restful-api-specification"},"HTTP RESTful API Specification"),(0,i.kt)("p",null,"Supporting the Greenfield Network API is essential for storage providers. It allows users and developers to interact and integrate with each SP node through a unified interface without having to adapt to custom interfaces from different SP nodes, greatly simplifying the user experience and development difficulty. The API includes functions to retrieve storage space information, upload and download files, and manage permissions."),(0,i.kt)("p",null,"SP nodes can implement compatibility with the network API based on their own technology. Developers can refer to the Greenfield Network's open API documentation for interfacing development."),(0,i.kt)("h3",{id:"universal-endpoint"},"Universal Endpoint"),(0,i.kt)("p",null,"All storage objects in the Greenfield Network can be identified and accessed through a universal resource identifier (URI). When creating a storage object, the SP node needs to assign it a unique URI according to the network rules and support using that URI to retrieve the object."),(0,i.kt)("p",null,"The detailed spec is defined ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/bnb-chain/greenfield-whitepaper/blob/main/part3.md#231-universal-endpoint"},"here"),"."),(0,i.kt)("h3",{id:"auth-methods"},"Auth Methods"),(0,i.kt)("p",null,"Permission management and authentication mechanisms are essential for a decentralized storage network, ensuring that only authorized users can access specific storage objects. The Greenfield Network defines standard permission divisions and authorization processes, requiring SP nodes to implement detailed permission control and user authentication accordingly. SP should achieve following three authentication at least:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GNFD1-ECDSA"),"\nIt requires users to use a private key to sign for authentication."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GNFD2-EDDSA"),"\nIt is used for web-based applications and users to store the \u201coff chain auth\u201d EdDSA account key in SPs. Users can communicate with the SP without explicit signature for most interactions."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GNFD1-ETH-PERSONAL_SIGN"),"\nIt is only used to verify wallet personal signature when registering EdDSA account key in SP from a web application (e.g. ",(0,i.kt)("a",{parentName:"li",href:"https://dcellar.io"},"https://dcellar.io"),").")),(0,i.kt)("h2",{id:"open-source-implementation"},"Open source Implementation"),(0,i.kt)("p",null,"The open source storage provider framework implements the Greenfield storage provider API and protocol specifications. It provides standardized interfaces and abstractions for SP node developers, greatly reducing the difficulty of setting up a storage provider. Developers can quickly build SP based on this framework and conduct secondary development according to their business needs. This helps cultivate the developer ecosystem of the Greenfield Network and encourages more technical teams to join the construction of the Greenfield Network. Refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/bnb-chain/greenfield-storage-provider"},"GitHub repo")," for more details."),(0,i.kt)("h3",{id:"interfaces"},"Interfaces"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/consensus/consensus.go"},"Consensus"),": is an interface to query greenfield consensus data. the consensus data can come from validator, fullnode, or other off-chain data service"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/rcmgr/README.md"},"ResourManager"),": ResourceManager is an interface to the resource management subsystem. The ResourceManager tracks and accounts for resource usage in the stack, from the internals to the application, and provides a mechanism to limit resource usage according to a user configurable policy."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/piecestore/piecestore.go"},"PieceStore"),": PieceStore defines the interfaces to the piece store that store the object payload data."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/piecestore/piecestore.go"},"PieceOp"),": PieceOp is a helper interface for piece key operator and piece size calculation."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/spdb/spdb.go"},"SPDB"),": SPDB is an interface to record the SP metadata."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/store/bsdb/database.go"},"BSDB"),": BSDB is an interface to record the greenfield chain metadata."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/taskqueue/README.md"},"TaskQueue"),": Task is an interface to the smallest unit of SP background service interaction. Task scheduling and execution are directly related to the order of task arrival, so task queue is a relatively important basic interface used by all modules inside SP.")),(0,i.kt)("h3",{id:"modules"},"Modules"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"Approver")," : Approver is a module to handle approval requests, such as MigrateBucketApproval."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"Authorizer"),": Authorizer is a module to authority verification."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"Downloader"),": Downloader is a module to handle download requests from users, and get challenge info requests from other components in the system."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"TaskExecutor"),": TaskExecutor is a module to handle background task, it will ask task from Manager modular, handle the tasks and report the results or status to the manager module includes: ",(0,i.kt)("inlineCode",{parentName:"li"},"ReplicatePieceTask"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"SealObjectTask"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"ReceivePieceTask"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"GCObjectTask"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"GCZombiePieceTask"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"GCMetaTask"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"Manager"),": Manager is a module responsible for task scheduling and other management of SP."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"P2P"),": P2P is a module to the interaction of control information between Sps, handles the replicate piece approval, it will broadcast the approval to other SPs, wait the responses, if up to min approved number or max approved number before timeout, will return the approvals."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"Receiver"),": Receiver is a module to receive the piece data from primary SP, calculates the integrity hash of the piece data and sign it, returns to the primary SP for sealing objects on greenfield."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"Signer"),": Signer is a module to handle the SP's sign and on greenfield chain operators. It holds SP all private keys. Considering the sp account's sequence number, it must be a singleton."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/module/README.md"},"Uploader"),": Uploader is a module to handle upload requests from users, and store it in primary SP's piece store.")),(0,i.kt)("h3",{id:"minimal-hardware-requirement"},"Minimal Hardware Requirement"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Recommend kubernetes or kubernetes compatible platforms."),(0,i.kt)("li",{parentName:"ul"},"More than 10 virtual machines, 4 core 8G spec."),(0,i.kt)("li",{parentName:"ul"},"50GB+ SQL database."),(0,i.kt)("li",{parentName:"ul"},"1 GBbps network connection.")),(0,i.kt)("h3",{id:"secondary-development-examples"},"Secondary Development Examples"),(0,i.kt)("p",null,"Customize interface"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"// new your own CustomizedPieceStore instance that implement the PieceStore interface\npieceStore := NewCustomizedPieceStore(...)\n\n// new GfSp framework app\ngfsp, err := NewGfSpBaseApp(GfSpConfig, CustomizePieceStore(pieceStore))\nif err != nil {\n    return err\n}\n\ngfsp.Start(ctx)\n\n// the GfSp framework will replace the default PieceStore with CustomizedPieceStore\n")),(0,i.kt)("p",null,"Customize module"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"// new your own CustomizedApprover instance that implement the Approver interface\n// NewCustomizedApprover must be func type: \n// func(app *GfSpBaseApp, cfg *gfspconfig.GfSpConfig) (coremodule.Modular, error)\napprover := NewCustomizedApprover(GfSpBaseApp, GfSpConfig)\n\n// the Special Modular name is Predefined\ngfspapp.RegisterModularInfo(model.ApprovalModularName, model.ApprovalModularDescription, approver)\n\n// new GfSp framework app\ngfsp, err := NewGfSpBaseApp(GfSpConfig, CustomizeApprover(approver))\nif err != nil {\n    return err\n}\n\ngfsp.Start(ctx)\n// the GfSp framework will replace the default Approver with Customized Approver\n")),(0,i.kt)("h2",{id:"documents"},"Documents"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/greenfield-whitepaper"},"Greenfield Whitepaper"),": The official Greenfield Whitepaper."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/home"},"Greenfield"),": The Greenfield documents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-module"},"Storage Module on Greenfield"),": The storage module on Greenfield Chain."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/storage-provider"},"Storage Provider on Greenfield"),": The storage provider on Greenfield Chain."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/greenfield-blockchain/modules/data-availability-challenge"},"Data Availability Challenge"),": The correctness of payload be stored in SP."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/introduction/overview"},"Storage Provider Introduction"),": The Greenfield Storage Provider documents."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/run-book/compile-dependences"},"Storage Provider Compiling and Dependencies"),": The detailed introduction to sp compiling and dependencies."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/run-book/run-local-SP-network"},"Run Local Storage Provider Network"),": The introduction to run local SP env for testing."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bnbchain.org/greenfield-docs/docs/guide/storage-provider/run-book/run-testnet-SP-node"},"Run Testnet Storage Provider Node"),": The introduction to run testnet SP node.")))}u.isMDXComponent=!0}}]);